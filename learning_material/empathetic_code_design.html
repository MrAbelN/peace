<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Empathetic Code Design - The Peace Framework</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../src/css/layout.css">
        <link rel="stylesheet" href="../src/css/presentation.css">
        <link rel="stylesheet" href="../src/css/terminal.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../background.html"><strong aria-hidden="true">2.</strong> Background</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../background/purpose.html"><strong aria-hidden="true">2.1.</strong> Purpose</a></li><li class="chapter-item "><a href="../background/strategy.html"><strong aria-hidden="true">2.2.</strong> Strategy</a></li></ol></li><li class="chapter-item expanded "><a href="../examples.html"><strong aria-hidden="true">3.</strong> Examples</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../examples/download.html"><strong aria-hidden="true">3.1.</strong> Download</a></li><li class="chapter-item "><a href="../examples/envman.html"><strong aria-hidden="true">3.2.</strong> Env Man</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../examples/envman/walkthrough.html"><strong aria-hidden="true">3.2.1.</strong> Walkthrough</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../technical_concepts.html"><strong aria-hidden="true">4.</strong> Technical Concepts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/resources.html"><strong aria-hidden="true">4.1.</strong> Resources</a></li><li class="chapter-item "><a href="../technical_concepts/function_graph.html"><strong aria-hidden="true">4.2.</strong> Function Graph</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/function_graph/abstraction.html"><strong aria-hidden="true">4.2.1.</strong> Abstraction</a></li><li class="chapter-item "><a href="../technical_concepts/function_graph/ordering.html"><strong aria-hidden="true">4.2.2.</strong> Ordering</a></li><li class="chapter-item "><a href="../technical_concepts/function_graph/streaming.html"><strong aria-hidden="true">4.2.3.</strong> Streaming</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/item.html"><strong aria-hidden="true">4.3.</strong> Item</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/item/item_parameters.html"><strong aria-hidden="true">4.3.1.</strong> Item Parameters</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/item/item_parameters/value_specification.html"><strong aria-hidden="true">4.3.1.1.</strong> Value Specification</a></li><li class="chapter-item "><a href="../technical_concepts/item/item_parameters/params_specification.html"><strong aria-hidden="true">4.3.1.2.</strong> Params Specification</a></li><li class="chapter-item "><a href="../technical_concepts/item/item_parameters/params_framework_support.html"><strong aria-hidden="true">4.3.1.3.</strong> Params Framework Support</a></li><li class="chapter-item "><a href="../technical_concepts/item/item_parameters/mapping_functions.html"><strong aria-hidden="true">4.3.1.4.</strong> Mapping Functions</a></li></ol></li></ol></li><li class="chapter-item "><a href="../technical_concepts/item_graph.html"><strong aria-hidden="true">4.4.</strong> Item Graph</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/item_graph/initialization.html"><strong aria-hidden="true">4.4.1.</strong> Initialization</a></li><li class="chapter-item "><a href="../technical_concepts/item_graph/state_inspection.html"><strong aria-hidden="true">4.4.2.</strong> State Inspection</a></li><li class="chapter-item "><a href="../technical_concepts/item_graph/state_ensure.html"><strong aria-hidden="true">4.4.3.</strong> State Ensure</a></li><li class="chapter-item "><a href="../technical_concepts/item_graph/clean.html"><strong aria-hidden="true">4.4.4.</strong> Clean</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/state.html"><strong aria-hidden="true">4.5.</strong> State</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/state/logical_state.html"><strong aria-hidden="true">4.5.1.</strong> Logical State</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/output.html"><strong aria-hidden="true">4.6.</strong> Output</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/output/execution_progress.html"><strong aria-hidden="true">4.6.1.</strong> Execution Progress</a></li><li class="chapter-item "><a href="../technical_concepts/output/presentation.html"><strong aria-hidden="true">4.6.2.</strong> Presentation</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/diagrams.html"><strong aria-hidden="true">4.7.</strong> Diagrams</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/diagrams/progress.html"><strong aria-hidden="true">4.7.1.</strong> Progress</a></li><li class="chapter-item "><a href="../technical_concepts/diagrams/outcome.html"><strong aria-hidden="true">4.7.2.</strong> Outcome</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/diagrams/outcome/render_technology.html"><strong aria-hidden="true">4.7.2.1.</strong> Render Technology</a></li><li class="chapter-item "><a href="../technical_concepts/diagrams/outcome/html_flexbox.html"><strong aria-hidden="true">4.7.2.2.</strong> HTML + Flexbox</a></li><li class="chapter-item "><a href="../technical_concepts/diagrams/outcome/div_diag.html"><strong aria-hidden="true">4.7.2.3.</strong> Div Diag</a></li></ol></li></ol></li><li class="chapter-item "><a href="../technical_concepts/endpoints_and_interaction.html"><strong aria-hidden="true">4.8.</strong> Endpoints and Interaction</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/endpoints_and_interaction/cmd_invocation.html"><strong aria-hidden="true">4.8.1.</strong> Cmd Invocation</a></li><li class="chapter-item "><a href="../technical_concepts/endpoints_and_interaction/interruption.html"><strong aria-hidden="true">4.8.2.</strong> Interruption</a></li><li class="chapter-item "><a href="../technical_concepts/endpoints_and_interaction/progress_output.html"><strong aria-hidden="true">4.8.3.</strong> Progress Output</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/workspace.html"><strong aria-hidden="true">4.9.</strong> Workspace</a></li><li class="chapter-item "><a href="../technical_concepts/commands.html"><strong aria-hidden="true">4.10.</strong> Commands</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/commands/scopes.html"><strong aria-hidden="true">4.10.1.</strong> Scopes</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/commands/scopes/reborrowing.html"><strong aria-hidden="true">4.10.1.1.</strong> Reborrowing</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases.html"><strong aria-hidden="true">4.10.2.</strong> Use Cases</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/workspace_initialization.html"><strong aria-hidden="true">4.10.2.1.</strong> Workspace Initialization</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/profile_list.html"><strong aria-hidden="true">4.10.2.2.</strong> Profile List</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/workspace_stored_active_profile.html"><strong aria-hidden="true">4.10.2.3.</strong> Workspace Stored Active Profile</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/workspace_active_profile_switch.html"><strong aria-hidden="true">4.10.2.4.</strong> Workspace Active Profile Switch</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/state_discovery_and_display.html"><strong aria-hidden="true">4.10.2.5.</strong> State Discovery and Display</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/state_read_and_display.html"><strong aria-hidden="true">4.10.2.6.</strong> State Read and Display</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/state_diff.html"><strong aria-hidden="true">4.10.2.7.</strong> State Diff</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/state_apply.html"><strong aria-hidden="true">4.10.2.8.</strong> State Apply</a></li><li class="chapter-item "><a href="../technical_concepts/commands/use_cases/state_clean.html"><strong aria-hidden="true">4.10.2.9.</strong> State Clean</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/commands/cmd_execution.html"><strong aria-hidden="true">4.10.3.</strong> Cmd Execution</a></li><li class="chapter-item "><a href="../technical_concepts/commands/interruptibility.html"><strong aria-hidden="true">4.10.4.</strong> Interruptibility</a></li></ol></li><li class="chapter-item "><a href="../technical_concepts/flow_versioning.html"><strong aria-hidden="true">4.11.</strong> Flow Versioning</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technical_concepts/flow_versioning/seamless_execution.html"><strong aria-hidden="true">4.11.1.</strong> Seamless Execution</a></li><li class="chapter-item "><a href="../technical_concepts/flow_versioning/upgrade_actions.html"><strong aria-hidden="true">4.11.2.</strong> Upgrade Actions</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Learning Material</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../learning_material/user_facing_automation_part_1.html"><strong aria-hidden="true">5.1.</strong> User Facing Automation - Part 1</a></li><li class="chapter-item "><a href="../learning_material/user_facing_automation_part_2.html"><strong aria-hidden="true">5.2.</strong> User Facing Automation - Part 2</a></li><li class="chapter-item expanded "><a href="../learning_material/empathetic_code_design.html" class="active"><strong aria-hidden="true">5.3.</strong> Empathetic Code Design</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../learning_material/empathetic_code_design/background.html"><strong aria-hidden="true">5.3.1.</strong> Background</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/scenario.html"><strong aria-hidden="true">5.3.2.</strong> Scenario</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/flow_definition.html"><strong aria-hidden="true">5.3.3.</strong> Flow Definition</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/inputs_and_outputs.html"><strong aria-hidden="true">5.3.4.</strong> Inputs and Outputs</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/parameters_specification.html"><strong aria-hidden="true">5.3.5.</strong> Parameters Specification</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/output_and_presentation.html"><strong aria-hidden="true">5.3.6.</strong> Output and Presentation</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/command_invocation.html"><strong aria-hidden="true">5.3.7.</strong> Command Invocation</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/parameters_recall.html"><strong aria-hidden="true">5.3.8.</strong> Parameters Recall</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/workspace.html"><strong aria-hidden="true">5.3.9.</strong> Workspace</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/profiles.html"><strong aria-hidden="true">5.3.10.</strong> Profiles</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/summary.html"><strong aria-hidden="true">5.3.11.</strong> Summary</a></li><li class="chapter-item "><a href="../learning_material/empathetic_code_design/qna.html"><strong aria-hidden="true">5.3.12.</strong> Q & A</a></li></ol></li><li class="chapter-item "><a href="../learning_material/interruptible_software.html"><strong aria-hidden="true">5.4.</strong> Interruptible Software</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../learning_material/interruptible_software/processes.html"><strong aria-hidden="true">5.4.1.</strong> Processes</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/execution.html"><strong aria-hidden="true">5.4.2.</strong> Execution</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/bus_analogy.html"><strong aria-hidden="true">5.4.3.</strong> Bus Analogy</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_interruptibility.html"><strong aria-hidden="true">5.4.4.</strong> Designing Interruptibility</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_interruptibility/stop_button.html"><strong aria-hidden="true">5.4.4.1.</strong> Stop Button</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_interruptibility/stopping_point.html"><strong aria-hidden="true">5.4.4.2.</strong> Stopping Point</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_interruptibility/parallelism.html"><strong aria-hidden="true">5.4.4.3.</strong> Parallelism</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_interruptibility/reporting.html"><strong aria-hidden="true">5.4.4.4.</strong> Reporting</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_interruptibility/strategy.html"><strong aria-hidden="true">5.4.4.5.</strong> Strategy</a></li></ol></li><li class="chapter-item "><a href="../learning_material/interruptible_software/interruptible_implementation.html"><strong aria-hidden="true">5.4.5.</strong> Interruptible Implementation</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/resumability.html"><strong aria-hidden="true">5.4.6.</strong> Resumability</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_resumability.html"><strong aria-hidden="true">5.4.7.</strong> Designing Resumability</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_resumability/executor_resumability.html"><strong aria-hidden="true">5.4.7.1.</strong> Executor Resumability</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/designing_resumability/stepwise_resumability.html"><strong aria-hidden="true">5.4.7.2.</strong> Stepwise Resumability</a></li></ol></li><li class="chapter-item "><a href="../learning_material/interruptible_software/resumable_implementation.html"><strong aria-hidden="true">5.4.8.</strong> Resumable Implementation</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/real_crates.html"><strong aria-hidden="true">5.4.9.</strong> Real Crates</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/summary.html"><strong aria-hidden="true">5.4.10.</strong> Summary</a></li><li class="chapter-item "><a href="../learning_material/interruptible_software/qna.html"><strong aria-hidden="true">5.4.11.</strong> Q & A</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../ideas.html"><strong aria-hidden="true">6.</strong> Ideas</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ideas/feature_gated_incremental_functionality.html"><strong aria-hidden="true">6.1.</strong> Feature Gated Incremental Functionality</a></li></ol></li><li class="chapter-item expanded "><a href="../licenses.html"><strong aria-hidden="true">7.</strong> Licenses</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Peace Framework</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/azriel91/peace" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/azriel91/peace/edit/main/doc/src/learning_material/empathetic_code_design.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="empathetic-code-design"><a class="header" href="#empathetic-code-design">Empathetic Code Design</a></h1>
<img src="empathetic_code_design/dove.svg" width="400" height="320" style="display: block; margin: auto;" alt="Peace logo" />
<div class="caption">
<blockquote>
<p>Communicating Clearly In Code</p>
</blockquote>
</div>
<div class="presentation_notes">
1. Today's talk is about empathetic code design.
<ol>
<li>
<p>The project I will use to demonstrate this is Peace, a framework to create empathetic and forgiving software automation.</p>
</li>
<li>
<p>Peace provides constraints over logic and data types, and common functionality.</p>
</li>
<li>
<p>By using the framework, logic and data types will be shaped to produce an automation tool that is clear in its communication.</p>
</li>
<li>
<p>A user uses that tool to get their work done, with good user experience.</p>
</li>
<li>
<p>Here's a 3 step process to upload a file to the internet.</p>
</li>
<li>
<p>Download the file, create an S3 bucket, upload the file to that bucket.</p>
</li>
<li>
<p>We can use a shell script to execute this process. <em>(live demo)</em></p>
</li>
<li>
<p>We can also use a tool, created using the Peace framework, to do the same thing.</p>
</li>
<li>
<p><code>envman</code> is a tool I created earlier to do this process. <em>(live demo)</em></p>
</li>
<li>
<p>This is a short demonstration of why one would use this framework.</p>
</li>
<li>
<p>When changing any environment, first we want to understand where we are.</p>
</li>
<li>
<p>Second, we also want to know, where we are headed.</p>
</li>
<li>
<p>Third, we want to know the cost of getting there.</p>
</li>
<li>
<p>Finally, when we understand enough about the change, we can decide to do it.</p>
</li>
<li>
<p>Now, when I say clear communication, it should be quite easy to see that A B C here maps to 1 2 3 there.</p>
</li>
<li>
<p>By presenting information in the right form, at the right level of detail, it's much easier to map between the concept and what is seen.</p>
</li>
<li>
<p>This is how Peace takes care of the user.</p>
</li>
<li>
<p>Today, we are going to look at how Peace takes care of the automation tool developer.</p>
</li>
<li>
<p>How clearly can we communicate between the mental model of a process, and code.</p>
</li>
<li>
<p>When designing a flow, we need to define the items in the flow, and the ordering between those items.</p>
</li>
<li>
<p>The reason these are called "items" instead of "steps", is because in Peace, the emphasis is on the outcome, rather than the actions.</p>
</li>
<li>
<p>Said another way, the purpose of technological processes is the end state, not the work undertaken to get there.</p>
</li>
<li>
<p>That statement does not apply to other kinds of processes, where the work is meaningful.</p>
</li>
<li>
<p>In code, adding items and ordering looks like this.</p>
</li>
<li>
<p>This shows linear ordering; it is possible to have work done in parallel when there is no dependency between items.</p>
</li>
<li>
<p>So here we can adjust the ordering such that A and B are both predecessors of C. A comes before C, and B comes before C.</p>
</li>
<li>
<p>So A and B can both begin at the same time, reducing the overall duration.</p>
</li>
<li>
<p>We'll adjust this in the example, I want you to see that both the file download and the s3 bucket turn blue, and when both are done, then the upload begins. We'll slow down our connection so it is easier to see. <em>(live demo)</em></p>
</li>
<li>
<p>Try doing that in a shell script.</p>
</li>
<li>
<p>After a developer defines the items in a flow, they also need to define how data passes through these items.</p>
</li>
<li>
<p>If you've written automation using bash scripts or YAML, usually data is just strings.</p>
</li>
<li>
<p>For the non-devs among us, using "strings" everywhere is like saying, "I took stuff and did stuff, and here is stuff".</p>
</li>
<li>
<p>It would be much better to say, "I grab my camera, and took a shot, and here's a picture."</p>
</li>
<li>
<p>To better communicate with developers, Peace uses type safety.</p>
</li>
<li>
<p>Because Peace is a framework, each item's automation logic should be shareable.</p>
</li>
<li>
<p>This means, the input to each item, and its output, are API.</p>
</li>
<li>
<p>In Peace, we call the input "parameters", and we use call the output "state".</p>
</li>
<li>
<p>For a file download item, the parameters are the source URL to download from and the path to write to.</p>
</li>
<li>
<p>and the state, can be either "the file's not there", or "it's there, and here is its content hash".</p>
</li>
<li>
<p>Given each item defines its parameters and state, we need a way for developers to pass values into the parameters.</p>
</li>
<li>
<p>Usually, at the start of a process, we know the values of some parameters, and we can pass them straight in.</p>
</li>
<li>
<p>However, sometimes we need part of the process to be completed, to have the information to pass to a subsequent item.</p>
</li>
<li>
<p>For example, if we had a server instead of an S3 bucket, we cannot know what its IP address will be until we the server is created.</p>
</li>
<li>
<p>But we still want to encode into the flow, that the state from an earlier item, is needed to determine the parameter value for a subsequent item.</p>
</li>
<li>
<p>For the simple case, where we know the parameter values up front, we can just plug them in.</p>
</li>
<li>
<p>But we want to be able to express, "get the state from step two, and pass it into step three".</p>
</li>
<li>
<p>So I came up with this, for every item's parameters, the framework will generate a specification type that records how to figure out what values to use.</p>
</li>
<li>
<p>and you can pass it direct values, or you can tell it "here's what states to read, and here's how to extract the value to use for this field".</p>
</li>
<li>
<p>Here's how it looks like in code.</p>
</li>
<li>
<p>Yes, we can read states from multiple items, and use them to compute a value.</p>
</li>
<li>
<p>Best of all, it's type safe -- so within the code you can ask "what parameters do I need to pass in, and get them right".</p>
</li>
<li>
<p>If you make a mistake, you have a really big safety net called the compiler, that will save you.</p>
</li>
<li>
<p>The error message needs improvement, though I haven't yet figured that out.</p>
</li>
<li>
<p>If the parameter type changes, such as when you upgrade your item version, then you get a compilation error, which means you don't have to work to discover where to change -- the compiler <em>tells you</em>.</p>
</li>
<li>
<p>Now that we have our logic and our data, we need a way to interact with it.</p>
</li>
<li>
<p>Peace is designed to separate the automation logic and data, from how it is interacted with and presented.</p>
</li>
<li>
<p>Whether it is interactive shell, uninteractive shell, web API, or web page, there is no rendering code in any item.</p>
</li>
<li>
<p>This allows automation developers to use different front ends to the same automation backend.</p>
</li>
<li>
<p>In code, the developer can choose which output to use.</p>
</li>
<li>
<p>Currently the only user facing output implementation is the <code>CliOutput</code>, which you've seen.</p>
</li>
<li>
<p>There are a number of other output implementations used in tests,</p>
</li>
<li>
<p>such as the <code>NoOpOutput</code> which discards all information, and the <code>FnTrackerOutput</code> which stores what output methods were called, with what parameters.</p>
</li>
<li>
<p>Developers can choose to write their own output implementation as well, but</p>
</li>
<li>
<p>It is within the scope of Peace provide implementations for common use cases.</p>
</li>
<li>
<p>So far, we've seen Items, Parameters, Specifications, and Output.</p>
</li>
<li>
<p>As a developer, this should be sufficient to run some commands.</p>
</li>
<li>
<p>First we group all of the above into a <code>CmdCtx</code>, then we call the command we want to run for the flow.</p>
</li>
<li>
<p><code>StatesCurrentReadCmd</code> and <code>EnsureCmd</code> are provided by the framework.</p>
</li>
<li>
<p>The real code still contains code to format the output, but this is something that the framework can provide.</p>
</li>
<li>
<p>For any automation software, the user should only need to pass in item parameters once.</p>
</li>
<li>
<p>Commands run using that flow should be able to recall parameters for the user.</p>
</li>
<li>
<p>How can we make this easy for the automation software developer?</p>
</li>
<li>
<p>The easiest thing, is for them to do nothing.</p>
</li>
<li>
<p>So whenever a command context is built, the following happens.</p>
</li>
<li>
<p>Previous parameter specifications will attempt to be loaded from disk.</p>
</li>
<li>
<p>The provided parameter specification will be merged with those.</p>
</li>
<li>
<p>Validation happens, to make sure there is enough information to resolve parameters for all items.</p>
</li>
<li>
<p>The merged parameter specifications will be serialized to disk.</p>
</li>
<li>
<p>If the parameter specifications don't pass validation, we should get a useful error message.</p>
</li>
<li>
<p>When a command is run, Peace stores information about that execution.</p>
</li>
<li>
<p>It stores this in a <code>.peace</code> directory within a workspace directory.</p>
</li>
<li>
<p>The automation tool developer needs to tell Peace how to determine the workspace directory.</p>
</li>
<li>
<p>Because if the tool is run in a sub directory, information should still be stored in the workspace directory.</p>
</li>
<li>
<p>If you think about git, if you run <code>git status</code> in any subdirectory of a repository, it will still find the <code>.git</code> directory somewhere up the chain.</p>
</li>
<li>
<p>One undeniable way to tell if software works, is to run it.</p>
</li>
<li>
<p>And to tell if it will work in production, we usually want to run it in a replica environment first.</p>
</li>
<li>
<p>Out of the box, Peace provides support for logically separate environments, through profiles.</p>
</li>
<li>
<p>So you can have multiple environments under different names, just like git branching.</p>
</li>
<li>
<p>Let's see a demo.</p>
</li>
<li>
<p>How do we communicate clearly in code?</p>
</li>
<li>
<p>We make sure the API matches the mental model.</p>
</li>
<li>
<p>We make sure we have good error messages.</p>
</li>
<li>
<p>When we require something of the developer, make it easy for them to provide it.</p>
</li>
<li>
<p>and when we adhere to these constraints, it will improve the automation development experience.</p>
</li>
</ol>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../learning_material/user_facing_automation_part_2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../learning_material/empathetic_code_design/background.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../learning_material/user_facing_automation_part_2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../learning_material/empathetic_code_design/background.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../src/js/highlightjs-line-numbers.min.js"></script>


    </div>
    </body>
</html>
